"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[2443],{936(e,r,s){s.r(r),s.d(r,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>t,metadata:()=>n,toc:()=>o});const n=JSON.parse('{"id":"architecture","title":"Architecture","description":"7 Golems + Infrastructure, 3 Environments","source":"@site/docs/architecture.md","sourceDirName":".","slug":"/architecture","permalink":"/golems/docs/architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/architecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"mainSidebar","previous":{"title":"Getting Started","permalink":"/golems/docs/getting-started"},"next":{"title":"Cloud Worker","permalink":"/golems/docs/cloud-worker"}}');var l=s(4848),i=s(8453);const t={sidebar_position:2},d="Architecture",c={},o=[{value:"7 Golems + Infrastructure, 3 Environments",id:"7-golems--infrastructure-3-environments",level:2},{value:"Mac = Brain, Railway = Body",id:"mac--brain-railway--body",level:2},{value:"Cloud Worker Schedule",id:"cloud-worker-schedule",level:2},{value:"Local Services (Mac)",id:"local-services-mac",level:2},{value:"Event Flow",id:"event-flow",level:2},{value:"Environment Variables (Dual Mode)",id:"environment-variables-dual-mode",level:2},{value:"Switching Modes",id:"switching-modes",level:2},{value:"Full Cloud Mode (Production)",id:"full-cloud-mode-production",level:3},{value:"Full Local Mode (Testing)",id:"full-local-mode-testing",level:3},{value:"Hybrid Mode (Development)",id:"hybrid-mode-development",level:3},{value:"Rollback",id:"rollback",level:2},{value:"API Cost Tracking",id:"api-cost-tracking",level:2},{value:"Database Schema",id:"database-schema",level:2},{value:"Supabase Tables (Cloud Backend)",id:"supabase-tables-cloud-backend",level:3},{value:"Local File Storage (~/.golems-zikaron/)",id:"local-file-storage-golems-zikaron",level:3},{value:"Deployment Architecture",id:"deployment-architecture",level:2},{value:"Security",id:"security",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const r={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.header,{children:(0,l.jsx)(r.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,l.jsx)("img",{src:"/docs/architecture-flow.svg",alt:"Golems Architecture \u2014 Data flow between local Mac and Railway cloud",style:{width:"100%",borderRadius:"12px",margin:"1.5rem 0"}}),"\n",(0,l.jsx)(r.h2,{id:"7-golems--infrastructure-3-environments",children:"7 Golems + Infrastructure, 3 Environments"}),"\n",(0,l.jsxs)(r.p,{children:["Golems is a ",(0,l.jsx)(r.strong,{children:"Bun workspace monorepo with 14 packages"})," \u2014 7 golems (1 orchestrator + 6 domain experts) plus shared infrastructure. Work splits between your local Mac (cognitive tasks), Railway cloud (data collection), and Vercel (web dashboard)."]}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Package"}),(0,l.jsx)(r.th,{children:"Role"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/shared"})}),(0,l.jsx)(r.td,{children:"Foundation \u2014 Supabase, LLM, email, state, notifications"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/claude"})}),(0,l.jsx)(r.td,{children:"Orchestrator \u2014 Telegram bot, command routing"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/recruiter"})}),(0,l.jsx)(r.td,{children:"Outreach, contacts, interview practice (Elo)"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/teller"})}),(0,l.jsx)(r.td,{children:"Finance, tax categorization, spending reports"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/jobs"})}),(0,l.jsx)(r.td,{children:"Job scraping, matching, MCP tools"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/content"})}),(0,l.jsx)(r.td,{children:"Visual content factory (Remotion, ComfyUI, dataviz) + text publishing"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/coach"})}),(0,l.jsx)(r.td,{children:"Whoop biometrics, Huberman protocols, daily planning"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/services"})}),(0,l.jsx)(r.td,{children:"Night Shift, Briefing, Cloud Worker, Wizard, Doctor"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"@golems/orchestrator"})}),(0,l.jsx)(r.td,{children:"n8n orchestration, render microservice"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"dashboard"})}),(0,l.jsx)(r.td,{children:"Next.js web dashboard (brain view, ops, backlog, content, tokens)"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"golems-tui"})}),(0,l.jsx)(r.td,{children:"React Ink terminal dashboard"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"tax-helper"})}),(0,l.jsx)(r.td,{children:"Schedule C transaction categorization (Sophtron MCP)"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"ralph"})}),(0,l.jsx)(r.td,{children:"Autonomous coding loop (PRD execution)"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"zikaron"})}),(0,l.jsx)(r.td,{children:"Memory layer (Python, 226K+ chunks, sqlite-vec)"})]})]})]}),"\n",(0,l.jsx)(r.h2,{id:"mac--brain-railway--body",children:"Mac = Brain, Railway = Body"}),"\n",(0,l.jsx)(r.mermaid,{value:'flowchart TB\n    subgraph mac["Your Mac (Brain)"]\n        direction LR\n        T[Telegram Bot] ~~~ N[Night Shift]\n        NS[Notification Server] ~~~ Z[Zikaron Memory]\n        RS[Render Service] ~~~ EN[Enrichment]\n    end\n    subgraph rail["Railway (Body)"]\n        direction LR\n        EP[Email Poller] ~~~ JS[Job Scraper]\n        BG[Briefing Generator]\n    end\n    subgraph vercel["Vercel (Face)"]\n        DASH[Dashboard]\n    end\n    mac <--\x3e|"HTTPS API + State Sync"| rail\n    rail --\x3e DB[(Supabase)]\n    mac --\x3e DB\n    vercel --\x3e DB\n    DASH --\x3e mac'}),"\n",(0,l.jsx)(r.h2,{id:"cloud-worker-schedule",children:"Cloud Worker Schedule"}),"\n",(0,l.jsx)(r.p,{children:"The Railway cloud worker runs these jobs on a timer:"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Job"}),(0,l.jsx)(r.th,{children:"Interval"}),(0,l.jsx)(r.th,{children:"What"}),(0,l.jsx)(r.th,{children:"Model"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Email Poller"}),(0,l.jsx)(r.td,{children:"Hourly (6am-7pm, skip noon, +10pm)"}),(0,l.jsx)(r.td,{children:"Fetch Gmail, route to Golems"}),(0,l.jsx)(r.td,{children:"Gemini Flash-Lite"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Job Scraper"}),(0,l.jsx)(r.td,{children:"6am, 9am, 1pm Sun-Thu"}),(0,l.jsx)(r.td,{children:"Find relevant jobs, score"}),(0,l.jsx)(r.td,{children:"Gemini Flash-Lite"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Whoop Sync"}),(0,l.jsx)(r.td,{children:"7am + 2pm daily"}),(0,l.jsx)(r.td,{children:"Sync biometrics to Supabase"}),(0,l.jsx)(r.td,{children:"\u2014"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:"Briefing"}),(0,l.jsx)(r.td,{children:"8:00 AM"}),(0,l.jsx)(r.td,{children:"Daily Telegram summary"}),(0,l.jsx)(r.td,{children:"Gemini Flash-Lite"})]})]})]}),"\n",(0,l.jsxs)(r.p,{children:["Cloud jobs use ",(0,l.jsx)(r.strong,{children:"Gemini 2.5 Flash-Lite"})," (free tier) for cost efficiency. Each job publishes events to Supabase that trigger Mac-side Golems."]}),"\n",(0,l.jsx)(r.h2,{id:"local-services-mac",children:"Local Services (Mac)"}),"\n",(0,l.jsx)(r.p,{children:"Your Mac runs these always-on services:"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Service"}),(0,l.jsx)(r.th,{children:"What"}),(0,l.jsx)(r.th,{children:"Tech"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Telegram Bot"})}),(0,l.jsx)(r.td,{children:"Receive commands, send notifications"}),(0,l.jsx)(r.td,{children:"grammy.js"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Night Shift"})}),(0,l.jsx)(r.td,{children:"Scan repos for improvements, auto-commit"}),(0,l.jsx)(r.td,{children:"Claude + Ralph"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Notification Server"})}),(0,l.jsx)(r.td,{children:"Queue and send Telegram messages"}),(0,l.jsx)(r.td,{children:"HTTP server"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Zikaron Memory"})}),(0,l.jsx)(r.td,{children:"Semantic search over past conversations"}),(0,l.jsx)(r.td,{children:"FastAPI + sqlite-vec"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Render Service"})}),(0,l.jsx)(r.td,{children:"Remotion video rendering microservice"}),(0,l.jsx)(r.td,{children:"Bun + Remotion"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.strong,{children:"Enrichment"})}),(0,l.jsx)(r.td,{children:"Process Zikaron chunks (tags, summaries)"}),(0,l.jsx)(r.td,{children:"GLM-4.7-Flash via Ollama"})]})]})]}),"\n",(0,l.jsxs)(r.p,{children:["The local services have ",(0,l.jsx)(r.strong,{children:"direct compute access"})," \u2014 they run local GLM-4.7-Flash (via Ollama) or cloud models when needed."]}),"\n",(0,l.jsx)(r.h2,{id:"event-flow",children:"Event Flow"}),"\n",(0,l.jsx)(r.p,{children:"When an email arrives:"}),"\n",(0,l.jsx)(r.mermaid,{value:'flowchart TD\n    A[Gmail API<br/>hourly poller] --\x3e B[Cloud Worker<br/>reads email, calls LLM]\n    B --\x3e C["LLM scores & routes<br/><small>e.g. recruiter outreach</small>"]\n    C --\x3e D[Event published:<br/>email_routed]\n    D --\x3e E[EmailGolem<br/>processes routing]\n    E --\x3e F{Subscription?}\n    F --\x3e|Yes| G[EmailGolem handles directly]\n    F --\x3e|No| H[Domain Golem handler]\n    G --\x3e I[Telegram notification]\n    H --\x3e I\n    I --\x3e J[You review in Telegram]\n    J --\x3e K[Follow-up tracking logged]'}),"\n",(0,l.jsx)(r.h2,{id:"environment-variables-dual-mode",children:"Environment Variables (Dual Mode)"}),"\n",(0,l.jsxs)(r.p,{children:["Golems supports ",(0,l.jsx)(r.strong,{children:"dual mode"})," \u2014 run cloud or local via three env vars:"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# LLM Backend: where LLM calls happen\nexport LLM_BACKEND=gemini     # Cloud: Gemini Flash-Lite (free, default)\nexport LLM_BACKEND=haiku      # Cloud: Haiku (paid fallback)\nexport LLM_BACKEND=ollama     # Local: Ollama on Mac (for testing)\n\n# State Storage: where data lives\nexport STATE_BACKEND=supabase # Cloud: Supabase database\nexport STATE_BACKEND=file     # Local: ~/.golems-zikaron/\n\n# Notifications: where Telegram messages go\nexport TELEGRAM_MODE=direct   # Cloud worker sends directly\nexport TELEGRAM_MODE=local    # Mac notifier (HTTP) sends\n"})}),"\n",(0,l.jsx)(r.h2,{id:"switching-modes",children:"Switching Modes"}),"\n",(0,l.jsx)(r.h3,{id:"full-cloud-mode-production",children:"Full Cloud Mode (Production)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"export LLM_BACKEND=gemini\nexport STATE_BACKEND=supabase\nexport TELEGRAM_MODE=direct\n# Deploy to Railway, monitor /api/usage for token counts\n"})}),"\n",(0,l.jsx)(r.h3,{id:"full-local-mode-testing",children:"Full Local Mode (Testing)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"export LLM_BACKEND=ollama    # Run: ollama pull mistral\nexport STATE_BACKEND=file\nexport TELEGRAM_MODE=local\n# Run Mac services: bun src/telegram-bot.ts\n"})}),"\n",(0,l.jsx)(r.h3,{id:"hybrid-mode-development",children:"Hybrid Mode (Development)"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"export LLM_BACKEND=haiku      # Use cloud LLM\nexport STATE_BACKEND=file     # Store locally for iteration\nexport TELEGRAM_MODE=local    # Debug Telegram messages\n# Perfect for testing new features before cloud deploy\n"})}),"\n",(0,l.jsx)(r.h2,{id:"rollback",children:"Rollback"}),"\n",(0,l.jsxs)(r.p,{children:["If something breaks in cloud, roll back in ",(0,l.jsx)(r.strong,{children:"under 1 minute"}),":"]}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Switch back to local-only (everything still works)\nexport LLM_BACKEND=ollama\nexport STATE_BACKEND=file\nexport TELEGRAM_MODE=local\n\n# Restart Mac services\ngolems latest\n\n# Check status\ngolems status\n"})}),"\n",(0,l.jsx)(r.p,{children:"No data loss, no disruption. The state in Supabase is still there for when you re-enable cloud."}),"\n",(0,l.jsx)(r.h2,{id:"api-cost-tracking",children:"API Cost Tracking"}),"\n",(0,l.jsx)(r.p,{children:"All LLM calls are logged to a JSONL file:"}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-bash",children:"# Location (Mac):\ncat ~/.golems-zikaron/api_costs.jsonl\n\n# Location (Cloud):\ncurl https://your-service.up.railway.app/usage\n"})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Format:"})}),"\n",(0,l.jsx)(r.pre,{children:(0,l.jsx)(r.code,{className:"language-json",children:'{"timestamp": "2026-02-06T10:30:45Z", "model": "claude-haiku-4-5-20251001", "source": "email-poller", "input_tokens": 1240, "output_tokens": 340, "cost_usd": 0.002352}\n'})}),"\n",(0,l.jsx)(r.p,{children:(0,l.jsx)(r.strong,{children:"Model Pricing:"})}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsx)(r.li,{children:"Gemini Flash-Lite: Free tier (current cloud default)"}),"\n",(0,l.jsx)(r.li,{children:"GLM-4.7-Flash: Free (local via Ollama)"}),"\n",(0,l.jsx)(r.li,{children:"Haiku 4.5: $0.80 / $4.00 per 1M tokens (paid fallback)"}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"database-schema",children:"Database Schema"}),"\n",(0,l.jsx)(r.h3,{id:"supabase-tables-cloud-backend",children:"Supabase Tables (Cloud Backend)"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"Table"}),(0,l.jsx)(r.th,{children:"Purpose"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"emails"})}),(0,l.jsx)(r.td,{children:"Routed emails, drafts, follow-ups"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"email_senders"})}),(0,l.jsx)(r.td,{children:"Sender profiles with category and action"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"subscriptions"})}),(0,l.jsx)(r.td,{children:"Email subscription tracking"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"payments"})}),(0,l.jsx)(r.td,{children:"Payment/transaction tracking"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"golem_state"})}),(0,l.jsx)(r.td,{children:"State storage for golems"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"golem_events"})}),(0,l.jsx)(r.td,{children:"Audit log of all system events"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"golem_jobs"})}),(0,l.jsx)(r.td,{children:"Job listings from scraper"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"scrape_activity"})}),(0,l.jsx)(r.td,{children:"Scraping run logs"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"outreach_contacts"})}),(0,l.jsx)(r.td,{children:"Recruiter targets, score, last contacted"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"outreach_messages"})}),(0,l.jsx)(r.td,{children:"Generated outreach messages"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"linkedin_connections"})}),(0,l.jsx)(r.td,{children:"LinkedIn network data"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"practice_sessions"})}),(0,l.jsx)(r.td,{children:"Interview practice recordings"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"practice_questions"})}),(0,l.jsx)(r.td,{children:"Interview practice questions"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"backlog_items"})}),(0,l.jsx)(r.td,{children:"Kanban board items"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"pipeline_runs"})}),(0,l.jsx)(r.td,{children:"Content pipeline execution logs"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"llm_usage"})}),(0,l.jsx)(r.td,{children:"Token usage and cost tracking"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"service_heartbeats"})}),(0,l.jsx)(r.td,{children:"Service health pings"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"service_runs"})}),(0,l.jsx)(r.td,{children:"Cron job execution logs"})]})]})]}),"\n",(0,l.jsx)(r.h3,{id:"local-file-storage-golems-zikaron",children:"Local File Storage (~/.golems-zikaron/)"}),"\n",(0,l.jsxs)(r.table,{children:[(0,l.jsx)(r.thead,{children:(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.th,{children:"File"}),(0,l.jsx)(r.th,{children:"Purpose"})]})}),(0,l.jsxs)(r.tbody,{children:[(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"state.json"})}),(0,l.jsx)(r.td,{children:"Current Night Shift target, system state"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"event-log.json"})}),(0,l.jsx)(r.td,{children:"Local copy of recent events"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"api_costs.jsonl"})}),(0,l.jsx)(r.td,{children:"Cost tracking (append-only)"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"job-golem/seen-jobs.json"})}),(0,l.jsx)(r.td,{children:"Job scraper seen jobs tracking"})]}),(0,l.jsxs)(r.tr,{children:[(0,l.jsx)(r.td,{children:(0,l.jsx)(r.code,{children:"style/semantic-style-data.json"})}),(0,l.jsx)(r.td,{children:"Your writing style profile"})]})]})]}),"\n",(0,l.jsxs)(r.p,{children:[(0,l.jsx)(r.strong,{children:"Note:"})," ",(0,l.jsx)(r.code,{children:"embeddings.db"})," belongs to the Zikaron package, not autonomous."]}),"\n",(0,l.jsx)(r.h2,{id:"deployment-architecture",children:"Deployment Architecture"}),"\n",(0,l.jsx)(r.mermaid,{value:'flowchart TD\n    GH["GitHub<br/><small>Source repo</small>"] --\x3e RW["Railway<br/><small>Docker build, cloud worker</small>"]\n    GH --\x3e VC["Vercel<br/><small>Next.js dashboard</small>"]\n    RW <--\x3e SB[("Supabase<br/><small>Postgres + RLS + Storage</small>")]\n    VC --\x3e SB\n    SB <--\x3e MAC["Your Mac<br/><small>Telegram, Gmail, Claude, Ollama</small>"]'}),"\n",(0,l.jsx)(r.h2,{id:"security",children:"Security"}),"\n",(0,l.jsxs)(r.ul,{children:["\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"1Password for secrets"})," \u2014 never hardcode API keys"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Supabase RLS"})," \u2014 row-level security on all tables"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Separate API keys per project"})," \u2014 different keys for Golems vs SongScript"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"State sync over HTTPS"})," \u2014 encrypted Mac \u2194 Railway communication"]}),"\n",(0,l.jsxs)(r.li,{children:[(0,l.jsx)(r.strong,{children:"Event audit log"})," \u2014 all actions logged to ",(0,l.jsx)(r.code,{children:"golem_events"})," table"]}),"\n"]}),"\n",(0,l.jsx)(r.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,l.jsxs)(r.ol,{children:["\n",(0,l.jsxs)(r.li,{children:["Read ",(0,l.jsx)(r.a,{href:"/golems/docs/deployment/railway",children:"Railway Deployment"})," to set up Supabase and Railway"]}),"\n",(0,l.jsxs)(r.li,{children:["Check ",(0,l.jsx)(r.a,{href:"./golems/claude",children:"Golems"})," to understand each domain expert"]}),"\n",(0,l.jsxs)(r.li,{children:["Review ",(0,l.jsx)(r.a,{href:"/golems/docs/configuration/env-vars",children:"Environment Variables"})," for env var reference"]}),"\n"]})]})}function h(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,l.jsx)(r,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453(e,r,s){s.d(r,{R:()=>t,x:()=>d});var n=s(6540);const l={},i=n.createContext(l);function t(e){const r=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),n.createElement(i.Provider,{value:r},e.children)}}}]);