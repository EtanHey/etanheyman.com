"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[1533],{8004(e,r,n){n.r(r),n.d(r,{assets:()=>o,contentTitle:()=>d,default:()=>a,frontMatter:()=>c,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"packages/orchestrator","title":"Orchestrator \u2014 n8n + Render Service","description":"n8n workflow orchestration and Bun render microservice for content pipeline automation.","source":"@site/docs/packages/orchestrator.md","sourceDirName":"packages","slug":"/packages/orchestrator","permalink":"/golems/docs/packages/orchestrator","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/packages/orchestrator.md","tags":[],"version":"current","frontMatter":{"title":"Orchestrator \u2014 n8n + Render Service","description":"n8n workflow orchestration and Bun render microservice for content pipeline automation."},"sidebar":"mainSidebar","previous":{"title":"ContentGolem \u2014 Visual Content Factory","permalink":"/golems/docs/packages/content"},"next":{"title":"Ralph \u2014 Autonomous Coding Loop","permalink":"/golems/docs/packages/ralph"}}');var t=n(4848),i=n(8453);const c={title:"Orchestrator \u2014 n8n + Render Service",description:"n8n workflow orchestration and Bun render microservice for content pipeline automation."},d="Orchestrator",o={},l=[{value:"What It Does",id:"what-it-does",level:2},{value:"Render Microservice",id:"render-microservice",level:2},{value:"n8n Workflows",id:"n8n-workflows",level:2},{value:"Setup",id:"setup",level:3},{value:"Current State",id:"current-state",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Source",id:"source",level:2}];function h(e){const r={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(r.header,{children:(0,t.jsx)(r.h1,{id:"orchestrator",children:"Orchestrator"})}),"\n",(0,t.jsxs)(r.blockquote,{children:["\n",(0,t.jsx)(r.p,{children:"n8n orchestration layer for content pipelines + Bun render microservice."}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,t.jsx)(r.p,{children:"The Orchestrator package provides two things:"}),"\n",(0,t.jsxs)(r.ol,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Bun Render Microservice"})," (port 3001) \u2014 HTTP API wrapping ContentGolem's pipelines (ComfyUI, Remotion, DataViz, Pipeline Router)"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"n8n Workflow Templates"})," \u2014 Automation workflows that chain pipeline steps, triggered by Telegram messages or schedules"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"render-microservice",children:"Render Microservice"}),"\n",(0,t.jsx)(r.p,{children:"Bun HTTP server that exposes ContentGolem capabilities as REST endpoints:"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Method"}),(0,t.jsx)(r.th,{children:"Path"}),(0,t.jsx)(r.th,{children:"Description"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/comfyui/generate"})}),(0,t.jsx)(r.td,{children:"Generate image via Flux + quality scoring"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"GET"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/comfyui/status"})}),(0,t.jsx)(r.td,{children:"Check ComfyUI server status"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/remotion/render"})}),(0,t.jsx)(r.td,{children:"Render Remotion composition to video"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/remotion/still"})}),(0,t.jsx)(r.td,{children:"Capture single frame"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/dataviz/render"})}),(0,t.jsx)(r.td,{children:"Generate branded data visualization"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/pipeline/route"})}),(0,t.jsx)(r.td,{children:"AI-route idea to best pipeline"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"POST"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/pipeline/execute"})}),(0,t.jsx)(r.td,{children:"Route + execute in one call"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"GET"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/pipeline/stats"})}),(0,t.jsx)(r.td,{children:"Pipeline performance statistics"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"GET"})}),(0,t.jsx)(r.td,{children:(0,t.jsx)(r.code,{children:"/api/health"})}),(0,t.jsx)(r.td,{children:"Health check"})]})]})]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Start the render service\nbun run dev    # http://localhost:3001\n"})}),"\n",(0,t.jsx)(r.h2,{id:"n8n-workflows",children:"n8n Workflows"}),"\n",(0,t.jsxs)(r.table,{children:[(0,t.jsx)(r.thead,{children:(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.th,{children:"Workflow"}),(0,t.jsx)(r.th,{children:"Trigger"}),(0,t.jsx)(r.th,{children:"Pipeline"})]})}),(0,t.jsxs)(r.tbody,{children:[(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"AI Router"})}),(0,t.jsx)(r.td,{children:"Telegram message"}),(0,t.jsx)(r.td,{children:"Classifies intent > routes to pipeline"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Image Generation"})}),(0,t.jsx)(r.td,{children:"Sub-workflow"}),(0,t.jsx)(r.td,{children:"ComfyUI Flux > quality gate > Telegram"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Video Render"})}),(0,t.jsx)(r.td,{children:"Sub-workflow"}),(0,t.jsx)(r.td,{children:"Remotion render > Telegram"})]}),(0,t.jsxs)(r.tr,{children:[(0,t.jsx)(r.td,{children:(0,t.jsx)(r.strong,{children:"Data Viz Schedule"})}),(0,t.jsx)(r.td,{children:"Every Monday 9am"}),(0,t.jsx)(r.td,{children:"Fetch data > render infographics > Telegram"})]})]})]}),"\n",(0,t.jsx)(r.h3,{id:"setup",children:"Setup"}),"\n",(0,t.jsxs)(r.p,{children:["n8n Cloud instance available at ",(0,t.jsx)(r.code,{children:"etanheyman.app.n8n.cloud"}),". Self-hosted option via ",(0,t.jsx)(r.code,{children:"docker-compose.yml"})," (n8n + PostgreSQL)."]}),"\n",(0,t.jsx)(r.pre,{children:(0,t.jsx)(r.code,{className:"language-bash",children:"# Import workflow templates\nbash scripts/restore-workflows.sh http://localhost:5678\n\n# Backup current workflows\nbash scripts/backup-workflows.sh http://localhost:5678\n"})}),"\n",(0,t.jsx)(r.h2,{id:"current-state",children:"Current State"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Render microservice:"})," Code complete, wraps ",(0,t.jsx)(r.code,{children:"@golems/content"})," APIs"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"n8n Cloud:"})," Account exists, workflows not yet imported"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.strong,{children:"Workflow templates:"})," Created in valid n8n JSON format"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsxs)(r.ul,{children:["\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@golems/content"})," \u2014 ComfyUI client, Remotion renderer, quality scoring, data viz"]}),"\n",(0,t.jsxs)(r.li,{children:[(0,t.jsx)(r.code,{children:"@golems/shared"})," \u2014 Supabase, notifications"]}),"\n"]}),"\n",(0,t.jsx)(r.h2,{id:"source",children:"Source"}),"\n",(0,t.jsx)(r.p,{children:(0,t.jsx)(r.a,{href:"https://github.com/EtanHey/golems/tree/master/packages/orchestrator",children:(0,t.jsx)(r.code,{children:"packages/orchestrator/"})})})]})}function a(e={}){const{wrapper:r}={...(0,i.R)(),...e.components};return r?(0,t.jsx)(r,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453(e,r,n){n.d(r,{R:()=>c,x:()=>d});var s=n(6540);const t={},i=s.createContext(t);function c(e){const r=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(r):{...r,...e}},[r,e])}function d(e){let r;return r=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),s.createElement(i.Provider,{value:r},e.children)}}}]);