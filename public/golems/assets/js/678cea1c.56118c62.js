"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[7119],{5732(e,n,s){s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"packages/zikaron","title":"Zikaron \u2014 Memory Layer","description":"Persistent memory for Claude Code. 257K+ indexed conversation chunks with semantic search in under 2 seconds.","source":"@site/docs/packages/zikaron.md","sourceDirName":"packages","slug":"/packages/zikaron","permalink":"/golems/docs/packages/zikaron","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/packages/zikaron.md","tags":[],"version":"current","frontMatter":{"title":"Zikaron \u2014 Memory Layer","description":"Persistent memory for Claude Code. 257K+ indexed conversation chunks with semantic search in under 2 seconds."},"sidebar":"mainSidebar","previous":{"title":"@golems/shared \u2014 Foundation Library","permalink":"/golems/docs/packages/shared"},"next":{"title":"Per-Repo Sessions","permalink":"/golems/docs/per-repo-sessions"}}');var i=s(4848),t=s(8453);const c={title:"Zikaron \u2014 Memory Layer",description:"Persistent memory for Claude Code. 257K+ indexed conversation chunks with semantic search in under 2 seconds."},d="Zikaron (Memory)",l={},o=[{value:"What It Does",id:"what-it-does",level:2},{value:"Architecture",id:"architecture",level:2},{value:"Pipeline Stages",id:"pipeline-stages",level:2},{value:"1. Extract",id:"1-extract",level:3},{value:"2. Classify",id:"2-classify",level:3},{value:"3. Chunk",id:"3-chunk",level:3},{value:"4. Embed",id:"4-embed",level:3},{value:"5. Index",id:"5-index",level:3},{value:"Interfaces",id:"interfaces",level:2},{value:"CLI",id:"cli",level:3},{value:"MCP Server",id:"mcp-server",level:3},{value:"FastAPI Daemon",id:"fastapi-daemon",level:3},{value:"Enrichment Pipeline",id:"enrichment-pipeline",level:2},{value:"Stack",id:"stack",level:2},{value:"Source",id:"source",level:2}];function a(e){const n={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"zikaron-memory",children:"Zikaron (Memory)"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Persistent memory for Claude Code conversations. Index, search, and retrieve knowledge from past coding sessions."}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,i.jsxs)(n.p,{children:['Zikaron (Hebrew for "memory") is a ',(0,i.jsx)(n.strong,{children:"knowledge pipeline"})," that indexes every Claude Code conversation into a searchable database. It uses semantic embeddings to find past solutions, decisions, and patterns across all your projects. 257K+ chunks indexed, searchable in under 2 seconds."]}),"\n",(0,i.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"~/.claude/projects/          # Source: Claude Code conversations (JSONL)\n        |\n  PIPELINE\n  Extract -> Classify -> Chunk -> Embed -> Index\n                                  bge-large sqlite-vec\n                                  1024 dims   fast DB\n        |\n~/.local/share/zikaron/zikaron.db   # Storage (~1GB)\n        |\n  INTERFACES\n  CLI            FastAPI Daemon      MCP Server\n  search         /tmp/zikaron.sock   zikaron-mcp\n  dashboard      (<2s queries)\n"})}),"\n",(0,i.jsx)(n.h2,{id:"pipeline-stages",children:"Pipeline Stages"}),"\n",(0,i.jsx)(n.h3,{id:"1-extract",children:"1. Extract"}),"\n",(0,i.jsx)(n.p,{children:"Parse JSONL conversation files. Content-addressable storage for system prompts (SHA-256 deduplication). Detects conversation continuations."}),"\n",(0,i.jsx)(n.h3,{id:"2-classify",children:"2. Classify"}),"\n",(0,i.jsx)(n.p,{children:"Content types with preservation rules:"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Type"}),(0,i.jsx)(n.th,{children:"Value"}),(0,i.jsx)(n.th,{children:"Action"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ai_code"})}),(0,i.jsx)(n.td,{children:"HIGH"}),(0,i.jsx)(n.td,{children:"Preserve verbatim"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"stack_trace"})}),(0,i.jsx)(n.td,{children:"HIGH"}),(0,i.jsx)(n.td,{children:"Preserve exact (never split)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"user_message"})}),(0,i.jsx)(n.td,{children:"HIGH"}),(0,i.jsx)(n.td,{children:"Preserve"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"assistant_text"})}),(0,i.jsx)(n.td,{children:"MEDIUM"}),(0,i.jsx)(n.td,{children:"Preserve"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"file_read"})}),(0,i.jsx)(n.td,{children:"MEDIUM"}),(0,i.jsx)(n.td,{children:"Context-dependent"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"git_diff"})}),(0,i.jsx)(n.td,{children:"MEDIUM"}),(0,i.jsx)(n.td,{children:"Extract changed entities"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"build_log"})}),(0,i.jsx)(n.td,{children:"LOW"}),(0,i.jsx)(n.td,{children:"Summarize or mask"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"noise"})}),(0,i.jsx)(n.td,{children:"SKIP"}),(0,i.jsx)(n.td,{children:"Filter out"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"3-chunk",children:"3. Chunk"}),"\n",(0,i.jsx)(n.p,{children:"AST-aware chunking with tree-sitter for code (~500 tokens). Never splits stack traces. Turn-based chunking for conversation with 10-20% overlap."}),"\n",(0,i.jsx)(n.h3,{id:"4-embed",children:"4. Embed"}),"\n",(0,i.jsxs)(n.p,{children:["Uses ",(0,i.jsx)(n.code,{children:"bge-large-en-v1.5"})," model (1024 dimensions). Runs locally via sentence-transformers."]}),"\n",(0,i.jsx)(n.h3,{id:"5-index",children:"5. Index"}),"\n",(0,i.jsx)(n.p,{children:"sqlite-vec for vector similarity search. Sub-2-second queries across 257K+ chunks."}),"\n",(0,i.jsx)(n.h2,{id:"interfaces",children:"Interfaces"}),"\n",(0,i.jsx)(n.h3,{id:"cli",children:"CLI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'zikaron search-fast "how did I implement auth"\nzikaron dashboard                              # Interactive TUI\nzikaron index                                  # Re-index conversations\n'})}),"\n",(0,i.jsx)(n.h3,{id:"mcp-server",children:"MCP Server"}),"\n",(0,i.jsxs)(n.p,{children:["Exposed to Claude Code as ",(0,i.jsx)(n.code,{children:"zikaron-mcp"})," (8 tools):"]}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tool"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_search"})}),(0,i.jsx)(n.td,{children:"Semantic search across all sessions (with project, content_type, tag, intent filters)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_context"})}),(0,i.jsx)(n.td,{children:"Get surrounding conversation chunks for a search result"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_stats"})}),(0,i.jsx)(n.td,{children:"Index statistics (chunk count, projects, content types)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_list_projects"})}),(0,i.jsx)(n.td,{children:"List all indexed projects"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_file_timeline"})}),(0,i.jsx)(n.td,{children:"File interaction history across sessions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_operations"})}),(0,i.jsx)(n.td,{children:"Logical operation groups (read/edit/test cycles)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_regression"})}),(0,i.jsx)(n.td,{children:"What changed since a file last worked"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"zikaron_plan_links"})}),(0,i.jsx)(n.td,{children:"Session to plan/phase linkage"})]})]})]}),"\n",(0,i.jsx)(n.h3,{id:"fastapi-daemon",children:"FastAPI Daemon"}),"\n",(0,i.jsxs)(n.p,{children:["Unix socket server at ",(0,i.jsx)(n.code,{children:"/tmp/zikaron.sock"})," for sub-2-second queries from any local process."]}),"\n",(0,i.jsx)(n.h2,{id:"enrichment-pipeline",children:"Enrichment Pipeline"}),"\n",(0,i.jsx)(n.p,{children:"GLM-4.7-Flash (local, via Ollama) enriches indexed chunks with:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Summaries"})," \u2014 concise description of what each chunk contains"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Tags"})," \u2014 topic classification (e.g., ",(0,i.jsx)(n.code,{children:"bug-fix"}),", ",(0,i.jsx)(n.code,{children:"authentication"}),", ",(0,i.jsx)(n.code,{children:"typescript"}),")"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Importance scores"})," \u2014 1-10 rating for retrieval prioritization"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Intent classification"})," \u2014 debugging, implementing, configuring, etc."]}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Runs in background with ",(0,i.jsx)(n.code,{children:"PYTHONUNBUFFERED=1"}),", ",(0,i.jsx)(n.code,{children:"PRAGMA busy_timeout = 5000"})," for concurrent DB access. Progress tracked on the dashboard's ",(0,i.jsx)(n.code,{children:"/enrichment"})," page."]}),"\n",(0,i.jsx)(n.h2,{id:"stack",children:"Stack"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Language:"})," Python 3.10+"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Embeddings:"})," bge-large-en-v1.5 (sentence-transformers)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Vector DB:"})," sqlite-vec (1024 dimensions)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"API:"})," FastAPI (Unix socket)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Parser:"})," tree-sitter (AST-aware code chunking)"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"source",children:"Source"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.a,{href:"https://github.com/EtanHey/golems/tree/master/packages/zikaron",children:(0,i.jsx)(n.code,{children:"packages/zikaron/"})})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>d});var r=s(6540);const i={},t=r.createContext(i);function c(e){const n=r.useContext(t);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);