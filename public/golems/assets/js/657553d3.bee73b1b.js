"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[6279],{3790(e,s,n){n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"golems/coach","title":"CoachGolem \u2014 Health-Aware Life Coach","description":"Whoop biometrics, Huberman protocols, LLM coaching, calendar integration, and daily planning.","source":"@site/docs/golems/coach.md","sourceDirName":"golems","slug":"/golems/coach","permalink":"/golems/docs/golems/coach","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/golems/coach.md","tags":[],"version":"current","frontMatter":{"title":"CoachGolem \u2014 Health-Aware Life Coach","description":"Whoop biometrics, Huberman protocols, LLM coaching, calendar integration, and daily planning."},"sidebar":"mainSidebar","previous":{"title":"ClaudeGolem \u2014 Orchestrator","permalink":"/golems/docs/golems/claude"},"next":{"title":"Email System \u2014 Infrastructure","permalink":"/golems/docs/golems/email"}}');var l=n(4848),i=n(8453);const o={title:"CoachGolem \u2014 Health-Aware Life Coach",description:"Whoop biometrics, Huberman protocols, LLM coaching, calendar integration, and daily planning."},c="CoachGolem",d={},t=[{value:"What It Does",id:"what-it-does",level:2},{value:"Design Principles",id:"design-principles",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Key Modules",id:"key-modules",level:2},{value:"<code>coaching-engine.ts</code> \u2014 LLM Coaching",id:"coaching-enginets--llm-coaching",level:3},{value:"<code>protocol.ts</code> \u2014 Evidence-Based Rules",id:"protocolts--evidence-based-rules",level:3},{value:"Whoop Integration (via <code>@golems/shared/whoop/client</code>)",id:"whoop-integration-via-golemssharedwhoopclient",level:3},{value:"<code>schedule-engine.ts</code> \u2014 Daily Plan Generation",id:"schedule-enginets--daily-plan-generation",level:3},{value:"<code>status-aggregator.ts</code> \u2014 Ecosystem Status",id:"status-aggregatorts--ecosystem-status",level:3},{value:"Key Types",id:"key-types",level:2},{value:"Telegram Commands",id:"telegram-commands",level:2},{value:"Dashboard",id:"dashboard",level:2},{value:"Wiring",id:"wiring",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Source",id:"source",level:2}];function a(e){const s={a:"a",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"coachgolem",children:"CoachGolem"})}),"\n",(0,l.jsxs)(s.blockquote,{children:["\n",(0,l.jsx)(s.p,{children:"Health-aware life coach \u2014 Whoop biometrics, Huberman protocols, LLM coaching, calendar integration, and daily planning."}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"what-it-does",children:"What It Does"}),"\n",(0,l.jsxs)(s.p,{children:["CoachGolem is the ",(0,l.jsx)(s.strong,{children:"health-aware life planner"}),": it pulls live biometric data from Whoop, applies evidence-based protocols (Huberman Lab), reads state from other golems, integrates with Google Calendar, and generates personalized daily plans with LLM coaching. It does NOT invoke other golems \u2014 it reads their status and helps the human prioritize."]}),"\n",(0,l.jsx)(s.h2,{id:"design-principles",children:"Design Principles"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Health-first"})," \u2014 biometric data drives workout and energy recommendations"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Evidence-based"})," \u2014 Huberman Lab protocols for caffeine, light, supplements, sleep"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Read-only"})," \u2014 reads other golems' state, never invokes them"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Human-centric"})," \u2014 suggests priorities, doesn't auto-execute"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Calendar-aware"})," \u2014 knows about meetings, deadlines, blocked time"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Graceful degradation"})," \u2014 works without Whoop (skips health), without Calendar (empty events), without LLM (rule-based fallback)"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/schedule (health-aware):\n  1. Fetch Whoop biometrics (recovery, sleep, strain)\n  2. Load protocol rules (Huberman + personal context)\n  3. Read all golem statuses + Google Calendar\n  4. LLM generates personalized coaching (Gemini Flash-Lite, or rule-based fallback)\n  5. Format: health snapshot > coaching advice > workout > schedule > reminders\n\n/plan (basic):\n  1. Read all golem statuses + Google Calendar\n  2. Generate daily plan with priority-sorted pending items\n  3. Format for Telegram\n"})}),"\n",(0,l.jsx)(s.h2,{id:"key-modules",children:"Key Modules"}),"\n",(0,l.jsxs)(s.h3,{id:"coaching-enginets--llm-coaching",children:[(0,l.jsx)(s.code,{children:"coaching-engine.ts"})," \u2014 LLM Coaching"]}),"\n",(0,l.jsx)(s.p,{children:"Generates personalized daily coaching using Gemini Flash-Lite (free) with rule-based fallback:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"generateCoaching(input)"})," \u2014 personalized advice, workout, Huberman reminders, health snapshot"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"computeHubermanReminders()"})," \u2014 caffeine delay, NSDR, sunlight, supplements, coding stop"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"pickWorkout()"})," \u2014 adjusts by recovery color: red=walk+stretching, yellow=light, green=full"]}),"\n"]}),"\n",(0,l.jsxs)(s.h3,{id:"protocolts--evidence-based-rules",children:[(0,l.jsx)(s.code,{children:"protocol.ts"})," \u2014 Evidence-Based Rules"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"CoachProtocol"})," interface: sleep, body, career, schedule, huberman, coaching sections"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"DEFAULT_PROTOCOL"})," from user's context (shoulder injury, sleep phase shift, etc.)"]}),"\n",(0,l.jsxs)(s.li,{children:["Stored at ",(0,l.jsx)(s.code,{children:"~/.golems-zikaron/coach/protocol.json"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"loadProtocol()"}),", ",(0,l.jsx)(s.code,{children:"saveProtocol()"})]}),"\n"]}),"\n",(0,l.jsxs)(s.h3,{id:"whoop-integration-via-golemssharedwhoopclient",children:["Whoop Integration (via ",(0,l.jsx)(s.code,{children:"@golems/shared/whoop/client"}),")"]}),"\n",(0,l.jsx)(s.p,{children:"Live biometric data from Whoop API v2:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"getLatestRecovery()"})," \u2014 recovery score, HRV, resting HR, SpO2"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"getLatestSleep()"})," \u2014 duration, stages (REM/deep/light), performance, efficiency"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"getTodayStrain()"})," \u2014 strain, kilojoule, heart rates"]}),"\n",(0,l.jsx)(s.li,{children:"Recovery color: green (67%+), yellow (34-66%), red (<34%)"}),"\n"]}),"\n",(0,l.jsxs)(s.h3,{id:"schedule-enginets--daily-plan-generation",children:[(0,l.jsx)(s.code,{children:"schedule-engine.ts"})," \u2014 Daily Plan Generation"]}),"\n",(0,l.jsx)(s.p,{children:"Merges calendar events + golem statuses into a prioritized daily plan with time blocks."}),"\n",(0,l.jsxs)(s.h3,{id:"status-aggregatorts--ecosystem-status",children:[(0,l.jsx)(s.code,{children:"status-aggregator.ts"})," \u2014 Ecosystem Status"]}),"\n",(0,l.jsxs)(s.p,{children:["Reads ",(0,l.jsx)(s.code,{children:"getStatus()"})," from all golems (jobs, recruiter, teller) to show pending work items."]}),"\n",(0,l.jsx)(s.h2,{id:"key-types",children:"Key Types"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Type"}),(0,l.jsx)(s.th,{children:"Module"}),(0,l.jsx)(s.th,{children:"Purpose"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"CoachingOutput"})}),(0,l.jsx)(s.td,{children:"coaching-engine"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ advice, workout, hubermanReminders, healthSnapshot }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"CoachProtocol"})}),(0,l.jsx)(s.td,{children:"protocol"}),(0,l.jsx)(s.td,{children:"Sleep, body, career, schedule, huberman, coaching rules"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"HealthAwarePlan"})}),(0,l.jsx)(s.td,{children:"index"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ plan: DailyPlan, coaching: CoachingOutput }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"DailyPlan"})}),(0,l.jsx)(s.td,{children:"schedule-engine"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ date, greeting, blocks, pendingItems, summary }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"TimeBlock"})}),(0,l.jsx)(s.td,{children:"schedule-engine"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ start, end, type, title, source }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"EcosystemStatus"})}),(0,l.jsx)(s.td,{children:"status-aggregator"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"{ timestamp, golems, healthy, unhealthy, summary }"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"WhoopRecovery"})}),(0,l.jsx)(s.td,{children:"@golems/shared/whoop"}),(0,l.jsx)(s.td,{children:"Recovery score, HRV, SpO2, skin temp"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"WhoopSleep"})}),(0,l.jsx)(s.td,{children:"@golems/shared/whoop"}),(0,l.jsx)(s.td,{children:"Sleep stages, performance, efficiency"})]})]})]}),"\n",(0,l.jsx)(s.h2,{id:"telegram-commands",children:"Telegram Commands"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Command"}),(0,l.jsx)(s.th,{children:"Description"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"/schedule"})}),(0,l.jsx)(s.td,{children:"Health-aware daily plan (Whoop + Huberman + LLM coaching)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"/plan"})}),(0,l.jsx)(s.td,{children:"Basic daily plan (calendar + golem statuses, no health data)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"/golems"})}),(0,l.jsx)(s.td,{children:"Ecosystem status overview"})]})]})]}),"\n",(0,l.jsx)(s.h2,{id:"dashboard",children:"Dashboard"}),"\n",(0,l.jsxs)(s.p,{children:["The ",(0,l.jsx)(s.code,{children:"/coach"})," dashboard page shows:"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Recovery ring"})," \u2014 SVG gauge with Whoop recovery score and color"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Sleep architecture"})," \u2014 stacked bar (REM/deep/light/awake)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Strain gauge"})," \u2014 gradient bar with current strain level"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"7-day trends"})," \u2014 sparkline bars for recovery, sleep, and strain"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Huberman reminders"})," \u2014 protocol checklist grid"]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:["Data is synced from Whoop to ",(0,l.jsx)(s.code,{children:"whoop_snapshots"})," Supabase table via Cloud Worker (7am + 2pm)."]}),"\n",(0,l.jsx)(s.h2,{id:"wiring",children:"Wiring"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Briefing"})," (",(0,l.jsx)(s.code,{children:"packages/services/src/briefing.ts"}),") imports from coach for morning plans"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Calendar"})," reuses Gmail OAuth2 credentials"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Whoop tokens"})," cached at ",(0,l.jsx)(s.code,{children:"/tmp/whoop-tokens.json"})," (auth-server writes, client refreshes)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Protocol"})," stored at ",(0,l.jsx)(s.code,{children:"~/.golems-zikaron/coach/protocol.json"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Compliance"})," stored in ",(0,l.jsx)(s.code,{children:"~/.golems-zikaron/coach/compliance.json"})," (90-day retention)"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Cloud Worker"})," syncs Whoop data to Supabase at 7am and 2pm"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"@golems/shared"})," \u2014 GolemStatus, telegram-direct, state-store, Whoop client, Vercel LLM"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"@golems/jobs"})," \u2014 getStatus() for job match counts"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"@golems/recruiter"})," \u2014 getStatus() for draft/follow-up counts"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"@golems/teller"})," \u2014 getStatus() for financial summary"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"googleapis"})," \u2014 Google Calendar API v3"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Variable"}),(0,l.jsx)(s.th,{children:"Purpose"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"WHOOP_CLIENT_ID"})}),(0,l.jsx)(s.td,{children:"Whoop OAuth2 client ID"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"WHOOP_CLIENT_SECRET"})}),(0,l.jsx)(s.td,{children:"Whoop OAuth2 client secret"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"WHOOP_REFRESH_TOKEN"})}),(0,l.jsx)(s.td,{children:"Whoop refresh token (from auth-server)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"GMAIL_CLIENT_ID"})}),(0,l.jsx)(s.td,{children:"Calendar OAuth2 (shared with email)"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"GMAIL_CLIENT_SECRET"})}),(0,l.jsx)(s.td,{children:"Calendar OAuth2"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"GMAIL_REFRESH_TOKEN"})}),(0,l.jsx)(s.td,{children:"Calendar OAuth2"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"GOOGLE_GENERATIVE_AI_API_KEY"})}),(0,l.jsx)(s.td,{children:"Gemini for LLM coaching (optional \u2014 falls back to rules)"})]})]})]}),"\n",(0,l.jsx)(s.h2,{id:"source",children:"Source"}),"\n",(0,l.jsx)(s.p,{children:(0,l.jsx)(s.a,{href:"https://github.com/EtanHey/golems/tree/master/packages/coach",children:(0,l.jsx)(s.code,{children:"packages/coach/"})})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(a,{...e})}):a(e)}},8453(e,s,n){n.d(s,{R:()=>o,x:()=>c});var r=n(6540);const l={},i=r.createContext(l);function o(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);