"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[3924],{6729(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"golems/claude","title":"ClaudeGolem \u2014 Orchestrator","description":"Telegram bot, persistent Claude Code sessions, autonomous night-shift improvements, and ecosystem orchestration.","source":"@site/docs/golems/claude.md","sourceDirName":"golems","slug":"/golems/claude","permalink":"/golems/docs/golems/claude","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/golems/claude.md","tags":[],"version":"current","frontMatter":{"title":"ClaudeGolem \u2014 Orchestrator","description":"Telegram bot, persistent Claude Code sessions, autonomous night-shift improvements, and ecosystem orchestration."},"sidebar":"mainSidebar","previous":{"title":"Cloud Worker","permalink":"/golems/docs/cloud-worker"},"next":{"title":"CoachGolem \u2014 Health-Aware Life Coach","permalink":"/golems/docs/golems/coach"}}');var r=s(4848),o=s(8453);const t={title:"ClaudeGolem \u2014 Orchestrator",description:"Telegram bot, persistent Claude Code sessions, autonomous night-shift improvements, and ecosystem orchestration."},l="ClaudeGolem",a={},c=[{value:"Core Modes",id:"core-modes",level:2},{value:"1. Telegram Chat",id:"1-telegram-chat",level:3},{value:"2. Night Shift",id:"2-night-shift",level:3},{value:"Personality &amp; Communication",id:"personality--communication",level:2},{value:"Tone Profile",id:"tone-profile",level:3},{value:"Context Awareness",id:"context-awareness",level:3},{value:"Event Log Injection",id:"event-log-injection",level:2},{value:"Files",id:"files",level:2},{value:"Running ClaudeGolem",id:"running-claudegolem",level:2},{value:"Telegram Session",id:"telegram-session",level:3},{value:"Night Shift",id:"night-shift",level:3},{value:"Environment Variables",id:"environment-variables",level:2},{value:"Integration with Other Golems",id:"integration-with-other-golems",level:2},{value:"Database Schema",id:"database-schema",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"claudegolem",children:"ClaudeGolem"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Orchestrator \u2014 Telegram bot, persistent Claude Code sessions, autonomous night-shift improvements, and ecosystem coordination."}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"ClaudeGolem is the external-facing personality of the Golems ecosystem. It runs persistent Claude Code sessions and performs autonomous night-shift code improvements."}),"\n",(0,r.jsx)(n.h2,{id:"core-modes",children:"Core Modes"}),"\n",(0,r.jsx)(n.h3,{id:"1-telegram-chat",children:"1. Telegram Chat"}),"\n",(0,r.jsxs)(n.p,{children:["Persistent Claude Code session via ",(0,r.jsx)(n.code,{children:"--continue"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"claude --continue\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Features:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"5-minute timeout"})," with typing heartbeat every 60s"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Event log injection"}),' \u2014 "While You Were Down" context from other agents\' events']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Casual tone"})," \u2014 2/10 formality, Hebrew-English code-switching"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Autonomous commits"})," \u2014 Creates commits and pushes to PRs"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"2-night-shift",children:"2. Night Shift"}),"\n",(0,r.jsxs)(n.p,{children:["Autonomous code improvements running at ",(0,r.jsx)(n.strong,{children:"4am daily"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bun src/night-shift.ts\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Per-repo sessions:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Repository rotation: ",(0,r.jsx)(n.code,{children:"songscript"})," \u2192 ",(0,r.jsx)(n.code,{children:"zikaron"})," \u2192 ",(0,r.jsx)(n.code,{children:"claude-golem"})]}),"\n",(0,r.jsx)(n.li,{children:"Scans for TODOs, linting issues, test gaps"}),"\n",(0,r.jsx)(n.li,{children:"Creates worktrees for isolated changes"}),"\n",(0,r.jsx)(n.li,{children:"Commits with auto-generated messages"}),"\n",(0,r.jsx)(n.li,{children:"Creates PRs and pushes changes"}),"\n",(0,r.jsx)(n.li,{children:"Telegram notification of PRs created"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Quality gates:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Pre-commit hooks must pass"}),"\n",(0,r.jsx)(n.li,{children:"Test coverage maintained"}),"\n",(0,r.jsx)(n.li,{children:"No destructive operations"}),"\n",(0,r.jsx)(n.li,{children:"Human reviews before merge"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"personality--communication",children:"Personality & Communication"}),"\n",(0,r.jsx)(n.h3,{id:"tone-profile",children:"Tone Profile"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Formality:"})," 2/10 (very casual)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Length:"})," Brief, direct"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Languages:"})," Hebrew \u2194 English code-switching"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Emojis:"})," \ud83e\udef6 sparingly, context-appropriate"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Punctuation:"})," Natural (not over-formal)"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"context-awareness",children:"Context Awareness"}),"\n",(0,r.jsxs)(n.p,{children:["ClaudeGolem maintains persistent state and personality defined in ",(0,r.jsx)(n.code,{children:"SOUL.md"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Communication style:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Formality:"})," 2/10 (very casual)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Languages:"})," Hebrew \u2194 English code-switching"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Tone:"})," Friendly with occasional sarcasm"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Projects:"})," songscript, zikaron, claude-golem"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["State stored in ",(0,r.jsx)(n.code,{children:"~/.golems-zikaron/state.json"}),", loaded on every session spawn."]}),"\n",(0,r.jsx)(n.h2,{id:"event-log-injection",children:"Event Log Injection"}),"\n",(0,r.jsx)(n.p,{children:"When ClaudeGolem spawns, it receives:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-markdown",children:"# While You Were Down (last 24 hours)\n\n## EmailGolem Activity\n- Scored 12 emails (3 high priority)\n- Routed 2 to RecruiterGolem (job offers)\n\n## RecruiterGolem Activity\n- Sent 3 outreach messages\n- 1 reply received (LinkedIn DM)\n\n## Your PRs\n- #42: CodeRabbit flagged 2 issues (waiting review)\n- #38: Merged \u2713\n\n## Zikaron\n- Indexed 5 new conversations\n- Memory: 12.4k embeddings, 2.3GB\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This comes from ",(0,r.jsx)(n.code,{children:"event-log.json"})," maintained by infrastructure (last 24 hours via ",(0,r.jsx)(n.code,{children:"getRecentEvents(24)"}),")."]}),"\n",(0,r.jsx)(n.h2,{id:"files",children:"Files"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Core Engine"})," (",(0,r.jsx)(n.code,{children:"packages/claude/src/"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"telegram-bot.ts"})," \u2014 Telegram bot + notification server (port 3847)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"SOUL.md"})," \u2014 ClaudeGolem personality definition"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Infrastructure"})," (",(0,r.jsx)(n.code,{children:"packages/services/src/"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"night-shift.ts"})," \u2014 Autonomous runner (4am)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"briefing.ts"})," \u2014 Morning briefing (8am)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"cloud-worker.ts"})," \u2014 Railway entry point for all cloud golems"]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Shared"})," (",(0,r.jsx)(n.code,{children:"packages/shared/src/lib/"}),"):"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"event-log.ts"})," \u2014 Event log for ClaudeGolem memory"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"State:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"~/.golems-zikaron/state.json"})," \u2014 Night Shift target, session state"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"~/.golems-zikaron/event-log.json"})," \u2014 Golem actions log"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"running-claudegolem",children:"Running ClaudeGolem"}),"\n",(0,r.jsx)(n.h3,{id:"telegram-session",children:"Telegram Session"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd packages/claude\n\n# Start persistent session\nclaude --continue\n\n# From Telegram, any message arrives here and gets routed\n# Bot handles standard commands, others go to Claude session\n"})}),"\n",(0,r.jsx)(n.h3,{id:"night-shift",children:"Night Shift"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Manual trigger (normally 4am via launchd)\nbun src/night-shift.ts\n\n# Output:\n# \u2713 Scanning for TODOs in songscript...\n# \u2713 Found 3 improvements\n# \u2713 Created worktree: night-shift-2026-02-06\n# \u2713 Applied fixes, tests pass\n# \u2713 Committed: chore: cleanup TODOs and unused imports\n# \u2713 Pushed and created PR: #143\n# \u2713 Telegram notified\n"})}),"\n",(0,r.jsx)(n.h2,{id:"environment-variables",children:"Environment Variables"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Telegram\nexport TELEGRAM_BOT_TOKEN=$(op read op://YOUR_VAULT/YOUR_TELEGRAM_ITEM/credential)\nexport TELEGRAM_CHAT_ID=$(op read op://YOUR_VAULT/YOUR_CHAT_ID_ITEM/credential)\n\n# Claude Code API\nexport ANTHROPIC_API_KEY=$(op read op://YOUR_VAULT/YOUR_ANTHROPIC_ITEM/credential)\n\n# Night Shift targets\nexport REPOS_PATH=~/Gits  # Base path for repos\n"})}),"\n",(0,r.jsx)(n.h2,{id:"integration-with-other-golems",children:"Integration with Other Golems"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"EmailGolem"})," \u2014 High-score emails trigger ClaudeGolem alerts for code/PR context"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"RecruiterGolem"})," \u2014 ClaudeGolem provides writing feedback on outreach"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Telegram Bot"}),' \u2014 ClaudeGolem session is the "brain" behind longer conversations']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Zikaron"})," \u2014 Memory queries enrich context during sessions"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"database-schema",children:"Database Schema"}),"\n",(0,r.jsx)(n.p,{children:"No dedicated tables \u2014 state stored in JSON:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "session_id": "telegram-chat-2026-02-06",\n  "started_at": "2026-02-06T09:15:00Z",\n  "last_activity": "2026-02-06T09:45:00Z",\n  "context_loaded": ["event_log", "recent_prs", "zikaron_memory"],\n  "posts_pending_approval": 2,\n  "night_shift_last_run": "2026-02-06T04:00:00Z",\n  "git_worktrees": [\n    {\n      "name": "night-shift-2026-02-06",\n      "target_repo": "songscript",\n      "pr_number": 143\n    }\n  ]\n}\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Stored in ",(0,r.jsx)(n.code,{children:"~/.golems-zikaron/state.json"}),"."]}),"\n",(0,r.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Telegram session keeps timing out:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Check the telegram bot is running\npgrep -fl "telegram-bot"\n\n# Restart bot\nlaunchctl kickstart gui/$(id -u)/com.golemszikaron.telegram\n# Or use CLI\ngolems start telegram\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Night Shift not running at 4am:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Check launchd job\nlaunchctl list | grep golems-night-shift\n\n# View logs\nlog show --predicate 'process == \"Bun\"' --last 1h\n\n# Manually trigger\nbun src/night-shift.ts\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Memory issues during long sessions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Increase Node.js heap\nexport NODE_OPTIONS="--max-old-space-size=8192"\nclaude --continue\n'})}),"\n",(0,r.jsxs)(n.p,{children:["See ",(0,r.jsx)(n.code,{children:"docs/configuration/env-vars.md"})," for full setup."]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);