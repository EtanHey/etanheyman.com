"use strict";(globalThis.webpackChunk_golems_docsite=globalThis.webpackChunk_golems_docsite||[]).push([[1239],{4242(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>t,default:()=>h,frontMatter:()=>c,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"configuration/secrets","title":"Secrets Management","description":"Golems uses 1Password for secure secret storage. Never hardcode secrets or commit .env files to git.","source":"@site/docs/configuration/secrets.md","sourceDirName":"configuration","slug":"/configuration/secrets","permalink":"/golems/docs/configuration/secrets","draft":false,"unlisted":false,"editUrl":"https://github.com/EtanHey/golems/tree/master/packages/docs/docs/configuration/secrets.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"mainSidebar","previous":{"title":"Environment Variables","permalink":"/golems/docs/configuration/env-vars"},"next":{"title":"MCP Tools Reference","permalink":"/golems/docs/mcp-tools"}}');var i=s(4848),l=s(8453);const c={sidebar_position:2},t="Secrets Management",o={},d=[{value:"1Password Setup",id:"1password-setup",level:2},{value:"Vault Items",id:"vault-items",level:3},{value:"Accessing Secrets",id:"accessing-secrets",level:2},{value:"With 1Password CLI",id:"with-1password-cli",level:3},{value:"In Shell Profile",id:"in-shell-profile",level:3},{value:"In Railway (Production)",id:"in-railway-production",level:3},{value:".env File (Local Development Only)",id:"env-file-local-development-only",level:2},{value:"Key Rotation",id:"key-rotation",level:2},{value:"Key Rotation Best Practices",id:"key-rotation-best-practices",level:3},{value:"Security Best Practices",id:"security-best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function a(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"secrets-management",children:"Secrets Management"})}),"\n",(0,i.jsxs)(n.p,{children:["Golems uses ",(0,i.jsx)(n.strong,{children:"1Password"})," for secure secret storage. Never hardcode secrets or commit ",(0,i.jsx)(n.code,{children:".env"})," files to git."]}),"\n",(0,i.jsx)(n.h2,{id:"1password-setup",children:"1Password Setup"}),"\n",(0,i.jsx)(n.h3,{id:"vault-items",children:"Vault Items"}),"\n",(0,i.jsx)(n.p,{children:"Store your API keys in 1Password (in any vault you prefer):"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Secret Name"}),(0,i.jsx)(n.th,{children:"What to Store"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"ANTHROPIC_API_KEY"})}),(0,i.jsx)(n.td,{children:"Your Anthropic API key"}),(0,i.jsx)(n.td,{children:"Claude LLM calls (name the 1Password item anything you want)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUPABASE_URL"})}),(0,i.jsx)(n.td,{children:"Your Supabase project URL"}),(0,i.jsx)(n.td,{children:"Database connection"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"SUPABASE_SERVICE_KEY"})}),(0,i.jsx)(n.td,{children:"Your service role key"}),(0,i.jsx)(n.td,{children:"Cloud database access (service_role, bypasses RLS)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GMAIL_CLIENT_ID"})}),(0,i.jsx)(n.td,{children:"Google Cloud OAuth client ID"}),(0,i.jsx)(n.td,{children:"Gmail API access"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GMAIL_CLIENT_SECRET"})}),(0,i.jsx)(n.td,{children:"Google Cloud OAuth secret"}),(0,i.jsx)(n.td,{children:"Gmail OAuth"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"GMAIL_REFRESH_TOKEN"})}),(0,i.jsx)(n.td,{children:"OAuth refresh token"}),(0,i.jsx)(n.td,{children:"Persistent Gmail access"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TELEGRAM_BOT_TOKEN"})}),(0,i.jsx)(n.td,{children:"Bot token from @BotFather"}),(0,i.jsx)(n.td,{children:"Telegram bot auth"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"TELEGRAM_CHAT_ID"})}),(0,i.jsx)(n.td,{children:"Your chat/group ID"}),(0,i.jsx)(n.td,{children:"Notification destination"})]})]})]}),"\n",(0,i.jsx)(n.h2,{id:"accessing-secrets",children:"Accessing Secrets"}),"\n",(0,i.jsx)(n.h3,{id:"with-1password-cli",children:"With 1Password CLI"}),"\n",(0,i.jsx)(n.p,{children:"Install 1Password CLI:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"brew install 1password-cli\n"})}),"\n",(0,i.jsx)(n.p,{children:"Sign in:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"op signin\n"})}),"\n",(0,i.jsx)(n.p,{children:"Read a secret:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'op read "op://YOUR_VAULT/YOUR_ITEM/credential"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"in-shell-profile",children:"In Shell Profile"}),"\n",(0,i.jsxs)(n.p,{children:["Source secrets in your shell profile (e.g., ",(0,i.jsx)(n.code,{children:"~/.zshrc"}),"):"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Load Golems secrets\nexport ANTHROPIC_API_KEY=$(op read "op://YOUR_VAULT/YOUR_ANTHROPIC_ITEM/credential")\nexport SUPABASE_SERVICE_KEY=$(op read "op://YOUR_VAULT/YOUR_SUPABASE_ITEM/service_key")\nexport GMAIL_CLIENT_SECRET=$(op read "op://YOUR_VAULT/YOUR_GMAIL_ITEM/client_secret")\nexport TELEGRAM_BOT_TOKEN=$(op read "op://YOUR_VAULT/YOUR_TELEGRAM_ITEM/credential")\n'})}),"\n",(0,i.jsx)(n.h3,{id:"in-railway-production",children:"In Railway (Production)"}),"\n",(0,i.jsxs)(n.p,{children:["Railway environment variables are ",(0,i.jsx)(n.strong,{children:"plain text"})," (not 1Password). Copy values manually:"]}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Read from 1Password:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'op read "op://YOUR_VAULT/YOUR_ANTHROPIC_ITEM/credential"\n'})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["Paste into Railway dashboard \u2192 ",(0,i.jsx)(n.code,{children:"Settings"})," \u2192 ",(0,i.jsx)(n.code,{children:"Variables"})]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"Redeploy:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"railway up\n"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"env-file-local-development-only",children:".env File (Local Development Only)"}),"\n",(0,i.jsxs)(n.p,{children:["Create ",(0,i.jsx)(n.code,{children:".env"})," in project root for local development:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# .env (NEVER commit this)\nLLM_BACKEND=ollama\nSTATE_BACKEND=file\nTELEGRAM_MODE=local\nTZ=Asia/Jerusalem\n\nANTHROPIC_API_KEY=sk-ant-...\nGMAIL_CLIENT_ID=abc123.apps.googleusercontent.com\nGMAIL_CLIENT_SECRET=GOCSPX-...\nGMAIL_REFRESH_TOKEN=1//...\n\nTELEGRAM_BOT_TOKEN=123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11\nTELEGRAM_CHAT_ID=-1001234567890\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Add to ",(0,i.jsx)(n.code,{children:".gitignore"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:".env\n.env.local\n.env.*.local\n"})}),"\n",(0,i.jsx)(n.h2,{id:"key-rotation",children:"Key Rotation"}),"\n",(0,i.jsx)(n.p,{children:"When rotating API keys:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Generate new key"})," in Anthropic/Supabase/Gmail console"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Update 1Password"})," item with new value"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Redeploy Railway"})," with new variable"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Monitor logs"})," for successful auth"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Revoke old key"})," in console after 24 hours of successful operation"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"key-rotation-best-practices",children:"Key Rotation Best Practices"}),"\n",(0,i.jsx)(n.p,{children:"After rotating keys:"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Monitor logs for 1+ week to ensure new key works"}),"\n",(0,i.jsx)(n.li,{children:"Search for any hardcoded references to old keys"}),"\n",(0,i.jsx)(n.li,{children:"Revoke old key in provider console (Anthropic/Supabase/etc.)"}),"\n",(0,i.jsx)(n.li,{children:"Document the change in your internal changelog"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"security-best-practices",children:"Security Best Practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Store all secrets in 1Password"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Use service roles for database access (service_role key for cloud worker)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Rotate keys every 90 days"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Monitor API usage in dashboards (Anthropic, Supabase, Gmail, Telegram)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Never log sensitive values"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u2705 Use different keys per deployment (dev, staging, prod)"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u274c Never hardcode secrets in code"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:["\u274c Never commit ",(0,i.jsx)(n.code,{children:".env"})," files"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u274c Never share tokens in Slack/email"}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:"\u274c Never use user tokens where service tokens exist"}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/golems/docs/configuration/env-vars",children:"Environment Variables"})," \u2014 Complete variable reference"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"/golems/docs/deployment/railway",children:"Railway Deployment"})," \u2014 Production setup"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}},8453(e,n,s){s.d(n,{R:()=>c,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function c(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:c(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);